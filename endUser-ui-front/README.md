# Archon Task Manager

Archon Task Manager æ˜¯ä¸€å€‹åŸºæ–¼ Archon å°ˆæ¡ˆçµæ§‹çš„å“¡å·¥ä»»å‹™ç®¡ç†ç³»çµ±ã€‚å®ƒçš„æ ¸å¿ƒåŠŸèƒ½æ˜¯åŸºæ–¼å°ˆæ¡ˆçš„å­˜å–æ§åˆ¶ï¼Œç¢ºä¿å“¡å·¥åªèƒ½æŸ¥çœ‹å’Œç®¡ç†ä»–å€‘è¢«åˆ†é…åˆ°çš„ä»»å‹™ã€‚æ‡‰ç”¨ç¨‹å¼æä¾›å¤šç¨®ä»»å‹™è¦–åœ–ï¼ˆæ¸…å–®ã€è¡¨æ ¼ã€çœ‹æ¿ã€ç”˜ç‰¹åœ–ï¼‰ï¼Œä¸¦ç‚ºç®¡ç†å“¡æä¾›æ•¸æ“šé©—è­‰å’Œç®¡ç†åŠŸèƒ½ã€‚

![Archon Task Manager Screenshot](https://storage.googleapis.com/project-screenshots/archon-task-manager-dashboard-v2.png)

## âœ¨ ä¸»è¦åŠŸèƒ½

- **å®‰å…¨çš„èº«ä»½é©—è­‰**: ä½¿ç”¨ Supabase é€²è¡Œå®‰å…¨çš„ç™»å…¥å’Œè¨»å†Šã€‚
- **åŸºæ–¼å°ˆæ¡ˆçš„å­˜å–æ§åˆ¶**: å“¡å·¥åªèƒ½å­˜å–ä»–å€‘è¢«åˆ†é…åˆ°çš„å°ˆæ¡ˆå’Œä»»å‹™ã€‚
- **å¤šç¨®ä»»å‹™è¦–åœ–**:
    - **æ¸…å–®è¦–åœ–**: ç°¡æ½”çš„ä»»å‹™åˆ—è¡¨ã€‚
    - **è¡¨æ ¼è¦–åœ–**: å¯æ’åºçš„è©³ç´°ä»»å‹™è¡¨æ ¼ã€‚
    - **çœ‹æ¿è¦–åœ–**: å¯æ‹–æ”¾çš„ä»»å‹™ç‹€æ…‹çœ‹æ¿ã€‚
    - **ç”˜ç‰¹åœ–**: è¦–è¦ºåŒ–çš„å°ˆæ¡ˆæ™‚ç¨‹è¡¨ã€‚
- **ç®¡ç†å“¡é¢æ¿**:
    - ç”¨æˆ¶ç®¡ç†ï¼ˆç·¨è¼¯è§’è‰²å’Œç‹€æ…‹ï¼‰ã€‚
    - æ–‡ä»¶ç‰ˆæœ¬æ­·å²è¨˜éŒ„ã€‚
    - ç³»çµ±ç®¡ç†å“¡æ¬Šé™è½‰ç§»ã€‚
- **ä¸»é¡Œåˆ‡æ›**: æ”¯æ´äº®è‰²å’Œæš—è‰²æ¨¡å¼ã€‚
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: åœ¨æ¡Œé¢å’Œè¡Œå‹•è£ç½®ä¸Šéƒ½èƒ½æä¾›è‰¯å¥½çš„ç”¨æˆ¶é«”é©—ã€‚
- **ç„¡å¾Œç«¯ä¹Ÿèƒ½é‹è¡Œ**: å¦‚æœæœªè¨­å®š Supabaseï¼Œæ‡‰ç”¨ç¨‹å¼æœƒè‡ªå‹•ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šï¼Œæ–¹ä¾¿å¿«é€Ÿé è¦½ã€‚

## ğŸš€ æŠ€è¡“å †ç–Š

- **å‰ç«¯**: React, TypeScript, Tailwind CSS
- **è·¯ç”±**: React Router
- **æ•¸æ“šè¦–è¦ºåŒ–**: D3.js (ç”¨æ–¼ç”˜ç‰¹åœ–)
- **å¾Œç«¯**: Supabase (PostgreSQL, èº«ä»½é©—è­‰, RLS)

## ğŸ› ï¸ é–‹å§‹ä½¿ç”¨

é€™å€‹å°ˆæ¡ˆè¢«è¨­è¨ˆç‚ºä¸€å€‹ç´”å‰ç«¯æ‡‰ç”¨ï¼Œå¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿ `index.html` æª”æ¡ˆã€‚ç‚ºäº†ç²å¾—å®Œæ•´çš„é«”é©—ï¼ˆåŒ…æ‹¬æ•¸æ“šæŒä¹…åŒ–å’Œèº«ä»½é©—è­‰ï¼‰ï¼Œæ‚¨éœ€è¦å°‡å…¶é€£æ¥åˆ° Supabase å¾Œç«¯ã€‚

### 1. é‹è¡Œæ¨¡æ“¬æ•¸æ“šç‰ˆæœ¬ (ç„¡éœ€å¾Œç«¯)

ç›´æ¥ç”¨ç€è¦½å™¨é–‹å•Ÿ `index.html` æª”æ¡ˆã€‚æ‡‰ç”¨ç¨‹å¼æœƒè‡ªå‹•åµæ¸¬åˆ°æ²’æœ‰å¾Œç«¯é…ç½®ï¼Œä¸¦åŠ è¼‰é è¨­çš„æ¨¡æ“¬æ•¸æ“šã€‚

### 2. é€£æ¥åˆ° Supabase å¾Œç«¯ (æ¨è–¦)

#### æ­¥é©Ÿ 1: è¨­å®š Supabase å°ˆæ¡ˆ

1.  å‰å¾€ [supabase.com](https://supabase.com/) ä¸¦å»ºç«‹ä¸€å€‹æ–°å°ˆæ¡ˆã€‚
2.  å„²å­˜æ‚¨çš„å°ˆæ¡ˆ **URL** å’Œ **anon (public) key**ã€‚
3.  åœ¨æ‚¨çš„ Supabase å°ˆæ¡ˆå„€è¡¨æ¿ä¸­ï¼Œå‰å¾€ **SQL Editor**ã€‚
4.  æ‰“é–‹ `migration/complete_setup.sql` æª”æ¡ˆï¼Œè¤‡è£½å…¶æ‰€æœ‰å…§å®¹ï¼Œç„¶å¾Œè²¼åˆ° Supabase SQL ç·¨è¼¯å™¨ä¸­ä¸¦åŸ·è¡Œã€‚é€™å€‹è…³æœ¬å°‡æœƒè¨­å®šå¥½æ‰€æœ‰éœ€è¦çš„è³‡æ–™è¡¨ã€è§’è‰²å’Œå®‰å…¨ç­–ç•¥ã€‚

#### æ­¥é©Ÿ 2: åœ¨æ‡‰ç”¨ç¨‹å¼ä¸­é…ç½® Supabase

1.  åœ¨ç€è¦½å™¨ä¸­é‹è¡Œæ‡‰ç”¨ç¨‹å¼ã€‚
2.  ä½¿ç”¨é è¨­çš„ç®¡ç†å“¡å¸³è™Ÿç™»å…¥ (å¦‚æœä½¿ç”¨æ¨¡æ“¬æ•¸æ“š):
    - **Email**: `admin@archon.com`
    - **Password**: (ä»»ä½•å¯†ç¢¼éƒ½å¯ä»¥)
3.  å°èˆªåˆ° **Admin Panel** -> **Settings**ã€‚
4.  è¼¸å…¥æ‚¨åœ¨æ­¥é©Ÿ 1 ä¸­å„²å­˜çš„ Supabase **Project URL** å’Œ **Anon Key**ã€‚
5.  é»æ“Š "Save and Reload"ã€‚é é¢å°‡æœƒé‡æ–°æ•´ç†ä¸¦é€£æ¥åˆ°æ‚¨çš„ Supabase å¾Œç«¯ã€‚
6.  ç¾åœ¨ï¼Œæ‚¨å¯ä»¥è¨»å†Šä¸€å€‹æ–°å¸³è™Ÿæˆ–ä½¿ç”¨æ‚¨åœ¨ Supabase ä¸­å»ºç«‹çš„ä»»ä½•ç”¨æˆ¶ç™»å…¥ã€‚æ‚¨è¨»å†Šçš„ç¬¬ä¸€å€‹ç”¨æˆ¶å°‡è‡ªå‹•æˆç‚º `system_admin`ã€‚

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
/
â”œâ”€â”€ components/         # å¯é‡ç”¨çš„ React çµ„ä»¶ (åœ–ç¤ºã€å½ˆå‡ºè¦–çª—ç­‰)
â”œâ”€â”€ hooks/              # è‡ªå®šç¾© React Hooks (ä¾‹å¦‚ useAuth)
â”œâ”€â”€ pages/              # æ‡‰ç”¨ç¨‹å¼çš„ä¸»è¦é é¢çµ„ä»¶
â”œâ”€â”€ services/           # API æœå‹™å±¤ (è™•ç†èˆ‡ Supabase æˆ–æ¨¡æ“¬æ•¸æ“šçš„é€šè¨Š)
â”œâ”€â”€ migration/          # è³‡æ–™åº«é·ç§»è…³æœ¬
â”‚   â””â”€â”€ complete_setup.sql
â”œâ”€â”€ App.tsx             # ä¸»è¦æ‡‰ç”¨ç¨‹å¼çµ„ä»¶å’Œè·¯ç”±è¨­å®š
â”œâ”€â”€ index.html          # HTML é€²å…¥é»
â”œâ”€â”€ index.tsx           # React æ‡‰ç”¨ç¨‹å¼çš„æ ¹çµ„ä»¶
â”œâ”€â”€ types.ts            # å…¨åŸŸ TypeScript é¡å‹å®šç¾©
â””â”€â”€ README.md           # å°±æ˜¯ä½ ç¾åœ¨åœ¨è®€çš„é€™å€‹æª”æ¡ˆ
```

## ğŸ“œ å¾Œç«¯è³‡æ–™åº«çµæ§‹

`migration/complete_setup.sql` è…³æœ¬æœƒå»ºç«‹ä»¥ä¸‹è³‡æ–™åº«çµæ§‹:

- **ENUM é¡å‹**: ç”¨æ–¼å®šç¾©å›ºå®šçš„è§’è‰²ã€ç‹€æ…‹å’Œå„ªå…ˆç´š (`employee_role`, `task_status`, `task_priority` ç­‰)ã€‚
- **è³‡æ–™è¡¨**:
    - `profiles`: å„²å­˜ç”¨æˆ¶è³‡æ–™ï¼Œä¸¦èˆ‡ Supabase çš„ `auth.users` è¡¨ç›¸é—œè¯ã€‚
    - `archon_projects`: å„²å­˜å°ˆæ¡ˆè³‡è¨Šã€‚
    - `archon_project_assignments`: å°‡ç”¨æˆ¶èˆ‡å°ˆæ¡ˆå’Œè§’è‰²é€£çµèµ·ä¾†ã€‚
    - `archon_tasks`: å„²å­˜èˆ‡å°ˆæ¡ˆç›¸é—œçš„ä»»å‹™è©³ç´°è³‡è¨Šã€‚
    - `archon_document_versions`: ç”¨æ–¼å¯©è¨ˆè¿½è¸ªå’Œè¨˜éŒ„è®Šæ›´ã€‚
- **è§¸ç™¼å™¨**: `handle_new_user` å‡½æ•¸æœƒåœ¨ Supabase Auth ä¸­æœ‰æ–°ç”¨æˆ¶è¨»å†Šæ™‚ï¼Œè‡ªå‹•åœ¨ `profiles` è¡¨ä¸­å»ºç«‹å°æ‡‰çš„ç´€éŒ„ã€‚
- **è¡Œç´šå®‰å…¨æ€§ (RLS)**: å¯¦æ–½äº†åš´æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»¥ç¢ºä¿ç”¨æˆ¶åªèƒ½å­˜å–ä»–å€‘è¢«æˆæ¬Šçš„æ•¸æ“šï¼ˆä¾‹å¦‚ï¼Œåªèƒ½çœ‹åˆ°è‡ªå·±åƒèˆ‡çš„å°ˆæ¡ˆï¼‰ã€‚

é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†ä¸€å€‹åŠŸèƒ½é½Šå…¨ã€å®‰å…¨ä¸”å¯æ“´å±•çš„ä»»å‹™ç®¡ç†æ‡‰ç”¨ç¨‹å¼çš„å®Œæ•´æ¶æ§‹ã€‚

## ğŸ“Š è³‡æ–™çµæ§‹ (UML é¡åˆ¥åœ–)

ç‚ºäº†è®“åœ˜éšŠæ›´æ¸…æ¥šæœƒå“¡ç³»çµ±çš„è³‡æ–™çµæ§‹ï¼Œæˆ‘å€‘æ•´ç†äº†ä»¥ä¸‹çš„ UML é¡åˆ¥åœ–ã€‚é€™ä»½åœ–è¡¨åŸºæ–¼ `api.ts` ä¸­çš„ Mock Data å’Œ `types.ts` ä¸­çš„é¡å‹å®šç¾©ï¼Œæ¸…æ™°åœ°å±•ç¤ºäº†å„å€‹è³‡æ–™å¯¦é«”ä¹‹é–“çš„æ¬„ä½ã€é¡å‹å’Œé—œè¯æ€§ã€‚

```mermaid
classDiagram
    direction TD

    class Employee {
      +string id
      +string employeeId
      +string name
      +string email
      +string department
      +string position
      +enum status
      +EmployeeRole role
      +string avatar
    }

    class Project {
      +string id
      +string title
      +string description
      +enum status
      +string projectManagerId FK
    }

    class ProjectAssignment {
      +string id
      +string projectId FK
      +string employeeId FK
      +string role
      +boolean isActive
    }

    class Task {
      +string id
      +string project_id FK
      +string parent_task_id FK
      +string title
      +TaskStatus status
      +string assignee (Employee Name)
      +TaskPriority priority
      +string due_date
    }
    
    class DocumentVersion {
      +string id
      +string project_id FK
      +string task_id FK
      +string created_by (Employee ID) FK
      +string change_summary
      +string change_type
    }

    class BlogPost {
      +string id
      +string title
      +string authorName (Employee Name)
      +string publishDate
    }

    note for Employee "æ ¸å¿ƒçš„ç”¨æˆ¶/å“¡å·¥å¯¦é«”"
    note for ProjectAssignment "ç”¨æ–¼é€£æ¥å“¡å·¥å’Œå°ˆæ¡ˆçš„å¤šå°å¤šé—œä¿‚è¡¨"

    Employee "1" -- "0..*" Project : "Manages"
    Employee "1" -- "0..*" Task : "Is Assigned"
    Employee "1" -- "0..*" DocumentVersion : "Creates"
    Employee "1" -- "0..*" BlogPost : "Authors"
    
    Project "1" -- "0..*" Task : "Contains"
    Project "1" -- "0..*" DocumentVersion : "Has History For"

    Task "0..1" -- "0..*" Task : "Parent-Child"
    Task "1" -- "0..*" DocumentVersion : "Has History For"

    Employee "1" -- "0..*" ProjectAssignment
    Project "1" -- "0..*" ProjectAssignment
```